[На главную](/){ .md-button }
##
# Linux
Установка программ / пакетов / полезные команды

### Обновляем спис­ки пакетов / обновление всех установленных пакетов до их последних версий
```
sudo apt update
```
```
sudo apt upgrade
```

* удалить пакет
```
sudo apt remove [package-name]
```
* поиск пакета по репозиториям
```
sudo apt search [package-name]
```
* все доступные пакеты
```
sudo apt list
```
 
---
## #ssh

### Сгенерировать ключ
```
ssh-keygen -t rsa
```

### Вывести ключ в терминал
```
cat ~/.ssh/id_rsa.pub
```

### Скопировать ключ на удаленный сервер
После ввода команды, введите пароль (не будет отображаться) и нажмите ENTER. Утилита скопирует содержимое открытого ключа (~/.ssh/id_rsa.pub) на удаленный сервер в файл authorized_keys.
```
ssh-copy-id root@00.000.000.000
```

### Если соединение быстро обрывается можно использовать эту команду
```
ssh -o ServerAliveInterval=60 root@00.000.000.000
```

### Зайти на сервер по ssh
```
ssh root@00.000.000.000
```



---

## #Учетные записи

### меняем пароль пользователя ROOT
при вво­де сим­волы не отоб­ража­ются — нет ни букв, ни цифр, ни звез­дочек, это нор­маль­но, вве­ди новый пароль и наж­ми Enter
```
passwd
```

### запрет входа по паролю ROOT
когда вы убедились, что можете войти на сервер по SSH-ключу, стоит отключить возможность входа по паролю. Откройте файл конфигурации SSH
```
sudo nano /etc/ssh/sshd_config
```

### PasswordAuthentication no

Раскомментируйте (убрав # в начале строки) параметр PasswordAuthentication и укажите значение no, получив строку вида
![PasswordAuthentication](assets/img/PasswordAuthentication.png){ loading=lazy }
```
PasswordAuthentication no
```


### перезапустите службу SSH
сохраните файл и перезапустите службу SSH командой
```
sudo service ssh restart
```





---

### добавить учетную запись
следуйте инструкциям, чтобы установить пароль и заполнить другую информацию
```
adduser coder
```

### добавить права суперпользователя для пользователя coder
добавьте пользователя coder в группу sudo, используя команду
```
usermod -aG sudo coder
```

### проверьте, что пользователь добавлен в группу sudo, выполните команду
```
groups coder
```



---

* установить пароль новому пользователю
```
passwd coder
```
* удалить пользователя
```
deluser coder
```
```
userdel coder
```


### информация об учетных записях пользователей
```
cat /etc/passwd
```
группы
```
cat /etc/group
```
конфигурация для sudo
```
sudo cat /etc/sudoers
```
кто вошел в систему
```
who
```
```
w
```
последние сеансы входа в систему
```
last
```
---


## #swap - файл подкачки

### проверьте текущий размер swap
```
free -h
```

![memory](assets/img/memory.png)

### или воспользуйтесь утилитой htop
```
htop
```
![memory](assets/img/htop.png)

### создайте файл подкачки размером 3ГБ с помощью команды (замените "3G" на нужный размер)
```
sudo fallocate -l 3G /swapfile
```

### установите правильные разрешения на файл подкачки
```
sudo chmod 600 /swapfile
```

### преобразуйте файл в область подкачки
```
sudo mkswap /swapfile
```
![memory](assets/img/fileswap.png)


### активируйте файл подкачки
```
sudo swapon /swapfile
```

### проверьте, что новая область подкачки добавлена
```
sudo swapon --show
```
![memory](assets/img/sizeswap.png)


### чтобы сделать изменения постоянными после перезагрузки, добавьте запись о файле подкачки в файл /etc/fstab
```
echo '/swapfile none swap sw 0 0' | sudo tee -a /etc/fstab
```

### проверьте изменения swap - файла подкачки
```
free -h
```
```
htop
```
![swap](assets/img/newfree.png)
![htop](assets/img/newhtop.png)
 

### перезагрузить сервер
после изменения файла подкачки в Ubuntu, вам рекомендуется перезагрузить сервер командой sudo reboot. Перезагрузка обеспечит корректное применение всех изменений, включая добавление нового файла подкачки, его активацию и обновление конфигурации
```
sudo reboot
```

---

## #Установка программ

### MCeditor
Midnight Commander — один из файловых менеджеров с текстовым интерфейсом типа Norton Commander для UNIX-подобных операционных
```
sudo apt install mc
```

### Nginx
```
sudo apt install nginx
```

* Добавление Nginx в автозагрузку:
```
sudo systemctl enable nginx
```
* Проверка статуса работы веб-сервера:
```
sudo service nginx status
```


### настройка nginx.conf

```
cd /etc/nginx/
```
```
sudo nano nginx.conf
```
```
sudo mcedit nginx.conf
```

* `1. имем блок gzip` - настройку для увеличения производительности сайта
* `2. убираем #` - снимаем комментарии с этих строк
![gzip](assets/img/gzip.png)

* `должно получиться вот так`
![gzip2](assets/img/gzip3.png)

* `gzip_comp_level 6` - уровень сжатия файлов

сохраняем изменения и перегрузим nginx
```
sudo systemctl restart nginx
```
```
sudo service nginx restart
```


### проблема с клонированием / Permission denied
* `Ошибка "Permission denied" при клонировании репозитория Git может возникнуть из-за недостаточных прав доступа к директории, в которую вы пытаетесь склонировать проект. В данном случае, вам не хватает прав на запись в директорию, где вы пытаетесь выполнить клонирование.`
* `Для решения этой проблемы вам следует убедиться, что у вас есть достаточные права доступа к директории /var/www/ или создать новую директорию, куда вы сможете клонировать проект. Вы можете выполнить следующие шаги:`

Убедитесь, что у вас есть права на запись в директорию /var/www/. Для этого выполните команду:
```
ls -ld /var/www/

```

Если у вас нет прав на запись в эту директорию, выполните команду для изменения прав доступа:
```
sudo chmod o+w /var/www/
```

### Убедитесь, что пользователь coder имеет права на запись в директорию /var/www/
Вы можете изменить права доступа с помощью команды
```
sudo chown -R coder:coder /var/www/
```



---

## Commands
получение списка ранее выполненных команд
```
history
```
переменные окружения
```
env
```
узнать имя пользователя

```
echo $USER
```

определить местоположение команды
```
which ls
```
